# Scream

# 🌽 농작물 도매가격 예측 앱 (Type C: 디지털 격차 해소)

## 1. 프로젝트 개요
저희 팀은 **디지털 격차 해소(Type C)**를 타겟으로 하여,  
농작물 **도매가격을 AI로 예측**해 **출하시기와 보관 결정을 돕는 앱**을 개발했습니다.  

2024 과기정통부 디지털정보격차 실태조사에 따르면 고령보다 AI 서비스 경험이 적은 집단은 농어민이며,  
주된 이유는 **“필요성을 못 느껴서”**였습니다.  

따라서 **‘필요에 의한 접근’**이 가장 효과적이라 판단했고,  
농민들이 직관적으로 체감할 수 있는 **‘도매가 흐름 예측’**을 통해  
출하시기·보관 결정을 돕고, 즉시 **편리함과 이익을 체감**하도록 설계했습니다.

---

## 2. 데이터
- 출처: **한국농수산식품유통공사(aT) ‘일간 도매가격’ 데이터**  
- 주요 컬럼:  
  - `일자(date)`  
  - `평균가(price)`  

- 대상 품목 (저장기간 ≥ 3개월):  
  - **양파, 배추, 감자, 고구마, 무**

📂 변환 과정:
1. 원본: `.xls` (위판장/일자별)  
2. 변환: `.csv` (일자·평균가만 사용, 단위=10kg 기준)  
3. 학습용: `*_csv/*.csv`

---

## 3. 모델 & 학습
- 모델: **XGBoost (회귀)**  
  - 채택 이유:  
    1. 수치형 데이터 처리에 강점  
    2. 학습 속도가 빠름 → 앱의 **주기적 업데이트에 적합**

- 학습 데이터: **2021 ~ 2024**  
- 검증 데이터: **2024년 마지막 90일 (early stopping 조정용)**  
- 테스트 데이터: **2025-01-01 ~ 2025-09-12**  
- 미래 예측: **2025-09-13 ~ 2025-12-31 (순차 예측)**

---

## 4. 피처 엔지니어링 (Feature Engineering)
단순 가격 데이터에서 더 많은 패턴을 끌어내기 위해 다음을 적용했습니다:

- **달력 피처**: 연, 월, 요일, 분기, 수확기 여부  
- **주기성**: sin/cos 변환 (연·월)  
- **추세**: trend, trend²  
- **Lag 피처**: `lag_1 ~ lag_84`  
- **이동 평균/표준편차**: `rmean_X`, `rstd_X`  
- **지수이동평균(EMA)**: `ema_7`, `ema_28`  
- **차분·수익률**: `diff_1`, `diff_7`, `ret_1`, `ret_7`  
- (옵션) **YoY 특성**: `yoy_diff`, `yoy_ratio`

---

## 5. 사례 적용
- **양파 데이터 (2022)**: 특정 월 가격 폭락 → 기사 분석 결과 *저장양파 과잉 해소 실패* 때문  
  → 해당 구간은 일시적 이벤트로 판단, 학습 시 **가중치 낮춤(Down-weighting)**  
  → 결과: Test 지표 전반적 상승

---

## 6. 피처 선택에 대한 고찰
- **EMA·Rolling 피처 제거 시**  
  - 검증/테스트 점수는 약간 상승  
  - 하지만 미래 예측이 **직선형 보수적 형태**로 나타남 → 신뢰도 낮음  

- **EMA·Rolling 피처 포함 시**  
  - 점수는 소폭 하락  
  - 그러나 미래 구간에서 **더 현실적인 그래프** 제공  
  - XGBoost 중요도 분석에서도 상위권 → 실제 예측 기여 확인

---

## 7. 평가 지표
- **MAE (Mean Absolute Error)**  
  → 실제 오차 크기를 직관적으로 보여줌  
- **SMAPE (Symmetric MAPE)**  
  → 비율 기반 지표로, 가격이 변동하는 **‘동향’ 반영에 적합**

결과적으로:   
- **테스트 데이터 (2025-01~09)** → MAE : 약 1,800 , SMAPE : 약 10% 를 기록(평균단가 약 20,000원)
  
---

## 8. 실행 방법
1. 각 품목별 **도매가격 CSV 파일**을 준비합니다.  
   (`고구마도매_csv/`, `감자도매_csv/`, `무도매_csv/`, `배추도매_csv/`, `양파도매_csv/` 폴더 안에 이미 변환된 CSV 파일이 들어 있음)

2. 예측하려는 품목에 해당하는 파이썬 파일을 실행합니다. 예:  

   ```bash
   python 감자도매예측.py
   python 고구마도매예측.py
   python 무도매예측.py
   python 배추도매예측.py
   python 양파도매예측(가중치반영).py
---

## 9. 기대 효과 & 확장성
- 농민들이 **출하시기·보관 결정을 통계적으로** 내릴 수 있어 **수익 극대화**  
- 디지털 격차 해소 → 농민들이 AI 서비스에 자연스럽게 접근  
- 향후 확장:  
  - 더 다양한 농작물 및 수산물  
  - 구독 서비스:  
    - 품질 등급 판별(이미지 AI)  
    - 손익분기 계산기

---

## 10. 시연
발표에서는 **시연 영상**과 함께, 실제 예측 그래프를 통해 농민이 얻을 수 있는 **직관적인 이점**을 보여줍니다.  

---

